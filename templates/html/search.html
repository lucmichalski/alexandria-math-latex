<!DOCTYPE html>
<html>
<head>
	<title>{{.Query}} - Alexandria</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" type="text/css" href="static/normalize.css"/>
	<link rel="stylesheet" type="text/css" href="static/skeleton.css"/>
	<link rel="stylesheet" type="text/css" href="static/color.css"/>
	<script src="static/clipboard.js" type="text/javascript"></script>
{{$query := .Query}}
</head>
<body>
<header id="form">
	<form action="search" method="get" accept-charset="utf-8">
		<input type="search" name="q" id="query" placeholder="Enter search…" value="{{.Query}}" placeholder="Enter search…" autofocus/>
		<button type="submit" id="search" style="line-height: 39px;">Search</button>
	</form>
</header>

<div id="main">{{range $value := .Matches}}
	<div class="scroll">
		<button class="id" data-clipboard-text="{{$value.Id}}">{{$value.Id}}</button><br>
		<div class="content">
{{$value.Content}}
		</div>
		<a href="alexandria.edit?id={{$value.Id}}">
			<img class="img" src="images/{{$value.Id}}.png" alt=" " />
		</a>
		<div class="metadata">
			{{ range $line := $value.SourceLines }}@source {{ $line }}<br>{{ end }}
			{{ range $line := $value.OtherLines }}{{ $line }}<br>{{ end }}
			<div class="tags">
			    {{range $index, $tag := $value.Tags}}<a class="tag" href='search?q={{$query}} tag:"{{$tag}}"'>{{$tag}}</a> {{ end }}
			</div>
		</div>
	</div>{{ end }}
</div>
<footer>
	{{ if eq .NumMatches 0 }}Found no matching scrolls.{{ else if le .TotalMatches 20 }}Displaying matches 1–{{.NumMatches}} of {{.TotalMatches}}. {{ else }}Displaying matches 1–20 of {{.TotalMatches}}.{{ end }}
</footer>
<script>
    var clipboard = new Clipboard('.id');
</script>
</body>
</html>
